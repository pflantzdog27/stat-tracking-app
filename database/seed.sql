-- Sample data for Hockey Stats Tracking App
-- This script provides realistic test data for development and testing

-- Insert sample season
INSERT INTO seasons (id, year, start_date, end_date, is_current) VALUES
('11111111-1111-1111-1111-111111111111', '2023-24', '2023-10-01', '2024-04-30', true);

-- Insert sample teams
INSERT INTO teams (id, name, abbreviation, city, conference, division, primary_color, secondary_color, founded_year, arena) VALUES
('22222222-2222-2222-2222-222222222221', 'Thunder Bay Lightning', 'TBL', 'Thunder Bay', 'Northern', 'Great Lakes', '#0066CC', '#FFFFFF', 2015, 'Thunder Bay Arena'),
('22222222-2222-2222-2222-222222222222', 'Sudbury Wolves', 'SUD', 'Sudbury', 'Northern', 'Great Lakes', '#CC0000', '#FFFFFF', 2010, 'Sudbury Community Arena'),
('22222222-2222-2222-2222-222222222223', 'Sault Rapids', 'SSM', 'Sault Ste. Marie', 'Northern', 'Great Lakes', '#006600', '#FFFF00', 2012, 'GFL Memorial Gardens'),
('22222222-2222-2222-2222-222222222224', 'North Bay Trappers', 'NBT', 'North Bay', 'Northern', 'Great Lakes', '#800080', '#FFFFFF', 2018, 'Pete Palangio Arena'),
('22222222-2222-2222-2222-222222222225', 'Timmins Rock', 'TIM', 'Timmins', 'Northern', 'Great Lakes', '#FF6600', '#000000', 2008, 'McIntyre Arena'),
('22222222-2222-2222-2222-222222222226', 'Kirkland Lake Gold Miners', 'KLG', 'Kirkland Lake', 'Northern', 'Great Lakes', '#FFD700', '#000000', 2020, 'Joe Mavrinac Community Complex');

-- Insert sample players for Thunder Bay Lightning
INSERT INTO players (id, name, position, jersey_number, team_id, birth_date, height, weight, shoots, is_active) VALUES
-- Forwards
('33333333-3333-3333-3333-333333333301', 'Connor McDavid Jr', 'C', 97, '22222222-2222-2222-2222-222222222221', '2005-01-13', 185, 195, 'L', true),
('33333333-3333-3333-3333-333333333302', 'Jake Thompson', 'LW', 19, '22222222-2222-2222-2222-222222222221', '2004-08-22', 180, 185, 'L', true),
('33333333-3333-3333-3333-333333333303', 'Ryan Mitchell', 'RW', 88, '22222222-2222-2222-2222-222222222221', '2005-03-15', 183, 190, 'R', true),
('33333333-3333-3333-3333-333333333304', 'Alex Johnson', 'C', 21, '22222222-2222-2222-2222-222222222221', '2004-11-08', 178, 175, 'R', true),
('33333333-3333-3333-3333-333333333305', 'Brady Williams', 'LW', 16, '22222222-2222-2222-2222-222222222221', '2005-06-20', 175, 170, 'L', true),
('33333333-3333-3333-3333-333333333306', 'Tyler Brown', 'RW', 12, '22222222-2222-2222-2222-222222222221', '2004-12-03', 188, 200, 'R', true),
('33333333-3333-3333-3333-333333333307', 'Cole Anderson', 'C', 9, '22222222-2222-2222-2222-222222222221', '2005-04-18', 182, 185, 'L', true),
('33333333-3333-3333-3333-333333333308', 'Josh Wilson', 'LW', 27, '22222222-2222-2222-2222-222222222221', '2004-09-12', 176, 180, 'L', true),
('33333333-3333-3333-3333-333333333309', 'Matt Davis', 'RW', 44, '22222222-2222-2222-2222-222222222221', '2005-07-25', 185, 195, 'R', true),
('33333333-3333-3333-3333-333333333310', 'Lucas Miller', 'C', 11, '22222222-2222-2222-2222-222222222221', '2004-10-07', 180, 175, 'R', true),
('33333333-3333-3333-3333-333333333311', 'Ethan Taylor', 'LW', 18, '22222222-2222-2222-2222-222222222221', '2005-02-14', 177, 172, 'L', true),
('33333333-3333-3333-3333-333333333312', 'Owen Moore', 'RW', 15, '22222222-2222-2222-2222-222222222221', '2004-05-30', 184, 188, 'R', true),

-- Defense
('33333333-3333-3333-3333-333333333313', 'Erik Karlsson Jr', 'D', 65, '22222222-2222-2222-2222-222222222221', '2004-07-31', 185, 190, 'R', true),
('33333333-3333-3333-3333-333333333314', 'Sam Garcia', 'D', 4, '22222222-2222-2222-2222-222222222221', '2005-01-22', 188, 205, 'L', true),
('33333333-3333-3333-3333-333333333315', 'Luke Martinez', 'D', 22, '22222222-2222-2222-2222-222222222221', '2004-08-15', 183, 195, 'L', true),
('33333333-3333-3333-3333-333333333316', 'Noah Rodriguez', 'D', 55, '22222222-2222-2222-2222-222222222221', '2005-03-28', 190, 210, 'R', true),
('33333333-3333-3333-3333-333333333317', 'Caleb Lewis', 'D', 7, '22222222-2222-2222-2222-222222222221', '2004-11-19', 186, 200, 'L', true),
('33333333-3333-3333-3333-333333333318', 'Mason Lee', 'D', 3, '22222222-2222-2222-2222-222222222221', '2005-06-12', 184, 185, 'R', true),

-- Goalies
('33333333-3333-3333-3333-333333333319', 'Carter Price Jr', 'G', 31, '22222222-2222-2222-2222-222222222221', '2004-08-05', 188, 185, 'L', true),
('33333333-3333-3333-3333-333333333320', 'Hunter Thomas', 'G', 35, '22222222-2222-2222-2222-222222222221', '2005-04-17', 185, 180, 'L', true);

-- Insert some sample games
INSERT INTO games (id, season_id, game_date, home_team_id, away_team_id, venue, status, home_score, away_score, attendance, game_type) VALUES
('44444444-4444-4444-4444-444444444441', '11111111-1111-1111-1111-111111111111', '2023-10-15 19:00:00-05', '22222222-2222-2222-2222-222222222221', '22222222-2222-2222-2222-222222222222', 'Thunder Bay Arena', 'finished', 4, 2, 2500, 'regular'),
('44444444-4444-4444-4444-444444444442', '11111111-1111-1111-1111-111111111111', '2023-10-22 19:30:00-05', '22222222-2222-2222-2222-222222222223', '22222222-2222-2222-2222-222222222221', 'GFL Memorial Gardens', 'finished', 1, 3, 3200, 'regular'),
('44444444-4444-4444-4444-444444444443', '11111111-1111-1111-1111-111111111111', '2023-11-05 18:00:00-05', '22222222-2222-2222-2222-222222222221', '22222222-2222-2222-2222-222222222224', 'Thunder Bay Arena', 'finished', 5, 1, 2800, 'regular'),
('44444444-4444-4444-4444-444444444444', '11111111-1111-1111-1111-111111111111', '2023-11-12 19:00:00-05', '22222222-2222-2222-2222-222222222225', '22222222-2222-2222-2222-222222222221', 'McIntyre Arena', 'finished', 2, 4, 1800, 'regular'),
('44444444-4444-4444-4444-444444444445', '11111111-1111-1111-1111-111111111111', '2023-11-18 20:00:00-05', '22222222-2222-2222-2222-222222222221', '22222222-2222-2222-2222-222222222226', 'Thunder Bay Arena', 'live', 2, 1, 2650, 'regular');

-- Insert sample game stats for Connor McDavid Jr
INSERT INTO game_stats (game_id, player_id, team_id, goals, assists, plus_minus, penalty_minutes, shots, time_on_ice_seconds, powerplay_goals, powerplay_assists) VALUES
('44444444-4444-4444-4444-444444444441', '33333333-3333-3333-3333-333333333301', '22222222-2222-2222-2222-222222222221', 2, 1, 2, 0, 6, 1200, 1, 0),
('44444444-4444-4444-4444-444444444442', '33333333-3333-3333-3333-333333333301', '22222222-2222-2222-2222-222222222221', 1, 2, 1, 2, 4, 1180, 0, 1),
('44444444-4444-4444-4444-444444444443', '33333333-3333-3333-3333-333333333301', '22222222-2222-2222-2222-222222222221', 1, 3, 3, 0, 5, 1250, 0, 2),
('44444444-4444-4444-4444-444444444444', '33333333-3333-3333-3333-333333333301', '22222222-2222-2222-2222-222222222221', 0, 1, 1, 0, 3, 1100, 0, 0),
('44444444-4444-4444-4444-444444444445', '33333333-3333-3333-3333-333333333301', '22222222-2222-2222-2222-222222222221', 1, 1, 1, 0, 4, 800, 0, 1);

-- Insert sample game stats for Jake Thompson
INSERT INTO game_stats (game_id, player_id, team_id, goals, assists, plus_minus, penalty_minutes, shots, hits, time_on_ice_seconds) VALUES
('44444444-4444-4444-4444-444444444441', '33333333-3333-3333-3333-333333333302', '22222222-2222-2222-2222-222222222221', 1, 0, 1, 0, 3, 2, 950),
('44444444-4444-4444-4444-444444444442', '33333333-3333-3333-3333-333333333302', '22222222-2222-2222-2222-222222222221', 0, 1, 0, 5, 2, 4, 900),
('44444444-4444-4444-4444-444444444443', '33333333-3333-3333-3333-333333333302', '22222222-2222-2222-2222-222222222221', 2, 0, 2, 0, 4, 1, 980),
('44444444-4444-4444-4444-444444444444', '33333333-3333-3333-3333-333333333302', '22222222-2222-2222-2222-222222222221', 1, 1, 1, 0, 3, 3, 920),
('44444444-4444-4444-4444-444444444445', '33333333-3333-3333-3333-333333333302', '22222222-2222-2222-2222-222222222221', 0, 0, 0, 2, 2, 2, 750);

-- Insert sample game stats for Erik Karlsson Jr (Defense)
INSERT INTO game_stats (game_id, player_id, team_id, goals, assists, plus_minus, penalty_minutes, shots, blocks, time_on_ice_seconds) VALUES
('44444444-4444-4444-4444-444444444441', '33333333-3333-3333-3333-333333333313', '22222222-2222-2222-2222-222222222221', 0, 2, 3, 0, 2, 3, 1400),
('44444444-4444-4444-4444-444444444442', '33333333-3333-3333-3333-333333333313', '22222222-2222-2222-2222-222222222221', 1, 1, 1, 0, 4, 2, 1380),
('44444444-4444-4444-4444-444444444443', '33333333-3333-3333-3333-333333333313', '22222222-2222-2222-2222-222222222221', 0, 1, 2, 2, 3, 4, 1420),
('44444444-4444-4444-4444-444444444444', '33333333-3333-3333-3333-333333333313', '22222222-2222-2222-2222-222222222221', 0, 2, 2, 0, 1, 5, 1350),
('44444444-4444-4444-4444-444444444445', '33333333-3333-3333-3333-333333333313', '22222222-2222-2222-2222-222222222221', 0, 1, 1, 0, 2, 1, 900);

-- Insert sample game stats for Carter Price Jr (Goalie)
INSERT INTO game_stats (game_id, player_id, team_id, saves, shots_against, goals_against, decision, time_on_ice_seconds) VALUES
('44444444-4444-4444-4444-444444444441', '33333333-3333-3333-3333-333333333319', '22222222-2222-2222-2222-222222222221', 28, 30, 2, 'W', 3600),
('44444444-4444-4444-4444-444444444442', '33333333-3333-3333-3333-333333333319', '22222222-2222-2222-2222-222222222221', 22, 23, 1, 'W', 3600),
('44444444-4444-4444-4444-444444444443', '33333333-3333-3333-3333-333333333319', '22222222-2222-2222-2222-222222222221', 18, 19, 1, 'W', 3600),
('44444444-4444-4444-4444-444444444444', '33333333-3333-3333-3333-333333333319', '22222222-2222-2222-2222-222222222221', 25, 27, 2, 'W', 3600);

-- Insert some game events for more detailed tracking
INSERT INTO game_events (game_id, event_type, period, time_in_period, description, team_id, player1_id, player2_id) VALUES
-- Game 1 events
('44444444-4444-4444-4444-444444444441', 'goal', 1, '05:30', 'Wrist shot from slot', '22222222-2222-2222-2222-222222222221', '33333333-3333-3333-3333-333333333301', '33333333-3333-3333-3333-333333333313'),
('44444444-4444-4444-4444-444444444441', 'goal', 2, '12:15', 'Power play goal', '22222222-2222-2222-2222-222222222221', '33333333-3333-3333-3333-333333333302', NULL),
('44444444-4444-4444-4444-444444444441', 'goal', 2, '18:45', 'Backhand shot', '22222222-2222-2222-2222-222222222221', '33333333-3333-3333-3333-333333333301', '33333333-3333-3333-3333-333333333302'),
('44444444-4444-4444-4444-444444444441', 'penalty', 3, '08:22', 'Tripping - 2 minutes', '22222222-2222-2222-2222-222222222222', NULL, NULL),
('44444444-4444-4444-4444-444444444441', 'goal', 3, '15:30', 'Empty net goal', '22222222-2222-2222-2222-222222222221', '33333333-3333-3333-3333-333333333303', '33333333-3333-3333-3333-333333333313');

-- Insert team stats (these would normally be calculated by triggers, but we'll insert manually for demo)
INSERT INTO team_stats (team_id, season_id, games_played, wins, losses, overtime_losses, goals_for, goals_against, shots_for, shots_against) VALUES
('22222222-2222-2222-2222-222222222221', '11111111-1111-1111-1111-111111111111', 4, 4, 0, 0, 14, 6, 85, 70),
('22222222-2222-2222-2222-222222222222', '11111111-1111-1111-1111-111111111111', 1, 0, 1, 0, 2, 4, 30, 28),
('22222222-2222-2222-2222-222222222223', '11111111-1111-1111-1111-111111111111', 1, 0, 1, 0, 1, 3, 23, 22),
('22222222-2222-2222-2222-222222222224', '11111111-1111-1111-1111-111111111111', 1, 0, 1, 0, 1, 5, 19, 18),
('22222222-2222-2222-2222-222222222225', '11111111-1111-1111-1111-111111111111', 1, 0, 1, 0, 2, 4, 27, 25);

-- Add some additional sample players for other teams to make testing more realistic
INSERT INTO players (name, position, jersey_number, team_id, birth_date, height, weight, shoots, is_active) VALUES
-- Sudbury Wolves players
('Mark Stone Jr', 'RW', 61, '22222222-2222-2222-2222-222222222222', '2004-05-13', 185, 195, 'R', true),
('Sidney Crosby III', 'C', 87, '22222222-2222-2222-2222-222222222222', '2005-08-07', 180, 200, 'L', true),
('Drew Doughty Jr', 'D', 8, '22222222-2222-2222-2222-222222222222', '2004-12-08', 185, 210, 'R', true),
('Jonathan Quick Jr', 'G', 32, '22222222-2222-2222-2222-222222222222', '2005-01-21', 185, 185, 'L', true),

-- Sault Rapids players
('Nathan MacKinnon Jr', 'C', 29, '22222222-2222-2222-2222-222222222223', '2004-09-01', 183, 200, 'R', true),
('Mikko Rantanen Jr', 'RW', 96, '22222222-2222-2222-2222-222222222223', '2005-10-29', 193, 215, 'L', true),
('Cale Makar Jr', 'D', 8, '22222222-2222-2222-2222-222222222223', '2004-10-30', 180, 187, 'R', true),
('Philipp Grubauer Jr', 'G', 31, '22222222-2222-2222-2222-222222222223', '2004-08-25', 185, 188, 'L', true);

-- Create some realistic stat variations across players
DO $$
DECLARE
    player_record RECORD;
    random_goals INTEGER;
    random_assists INTEGER;
    random_pim INTEGER;
    random_shots INTEGER;
BEGIN
    FOR player_record IN 
        SELECT id, position, team_id 
        FROM players 
        WHERE team_id = '22222222-2222-2222-2222-222222222221' 
        AND position IN ('C', 'LW', 'RW')
        AND id != '33333333-3333-3333-3333-333333333301' -- Skip McDavid as he already has stats
        AND id != '33333333-3333-3333-3333-333333333302' -- Skip Thompson as he already has stats
    LOOP
        -- Generate some realistic random stats
        random_goals := floor(random() * 8)::INTEGER; -- 0-7 goals
        random_assists := floor(random() * 12)::INTEGER; -- 0-11 assists  
        random_pim := floor(random() * 10)::INTEGER; -- 0-9 penalty minutes
        random_shots := random_goals * 3 + floor(random() * 15)::INTEGER; -- Realistic shot totals
        
        INSERT INTO player_stats (
            player_id, season_id, team_id, games_played, goals, assists, 
            penalty_minutes, shots, time_on_ice_seconds
        ) VALUES (
            player_record.id, 
            '11111111-1111-1111-1111-111111111111', 
            player_record.team_id,
            4, -- games played
            random_goals,
            random_assists,
            random_pim,
            random_shots,
            3600 + floor(random() * 1200)::INTEGER -- 3600-4800 seconds
        );
    END LOOP;
END $$;